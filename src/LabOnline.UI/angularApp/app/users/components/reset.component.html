<div class="bgLogin">
    <div class="container">
        <div class="row vertical-offset-100">
            <div class="col-md-4 col-md-offset-4">
                <p class="headerForm"></p>
                <div>
                    <div *ngIf="message" class="alert alert-danger" [innerHTML]="message"></div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><span class="title">Restablecer contrase&ntilde;a</span></h3>
                        <img *ngIf="isLoading" src="/assets/spin.svg" width="24" height="24" />
                    </div>
                    <div class="panel-body">
                        <div *ngIf="isConfirmed && !isPasswordChanged">
                            <p>
                                Puedes crear una nueva contrase&ntilde;a para tener nuevamente acceso a tu cuenta.
                            </p>
                            <form role="form" #f="ngForm" novalidate>
                                <fieldset>
                                    <div class="form-group">
                                        <input type="password" name="password" class="form-control" id="password"
                                            placeholder="Nueva contrase&ntilde;a" required autofocus autocomplete="off"
                                            [(ngModel)]="user.password" #password="ngModel" maxlength="20" 
                                            minlength="4" validateEqual="confirmPassword" reverse="true" />
                                        <div *ngIf="password.errors && (password.dirty || password.touched)">
                                            <div class="LabelError">
                                                La contrase単a es entre 4 y 20 caracteres.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <input type="password" name="confirmPassword" class="form-control" id="confirmPassword"
                                            placeholder="Confirmar contrase&ntilde;a" required autocomplete="off"
                                            [(ngModel)]="user.confirmPassword" #confirmPassword="ngModel" 
                                            maxlength="20" minlength="4" validateEqual="password" />
                                        <div *ngIf="confirmPassword.errors && (confirmPassword.dirty || confirmPassword.touched)">
                                            <div class="LabelError">
                                                La confirmaci&oacute;n de contrase単a es incorrecta.
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="form-group">
                                        <button class="btn btn-warning btn-sm" type="button" 
                                            (click)="changePassword()"
                                            [disabled]="isLoading || f.invalid">
                                            Cambiar contrase単a
                                        </button>
                                        <a class="btn btn-cancel btn-sm" [routerLink]="['/login']">Cancelar</a>                                    
                                    </div>                             
                                </fieldset>
                            </form>
                        </div>
                        <div *ngIf="isPasswordChanged">
                            <p>
                                    La contrase単a ha sido cambiada exitosamente.
                                </p>
                                <p>
                                    <a class="btn btn-warning" [routerLink]="['/login']">Regresar</a>
                                </p>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
    </div>
</div>